<!DOCTYPE html>
<html lang="en">

<head>
</head>

<body>
  <label for="_name">Product Name:</label>
  <input id="_name">
  <br>
  <label for="desc">Description:</label>
  <input id="desc"><br>
  <label for="price">Price:</label>
  <input id="price"><br>
  <label for="pic">Picture:</label>
  <input type="file" accept="image/*" id="pic"><br>
  <label for="category">Category:</label>
  <select id="category">
    <option value="1">Supplies</option>
    <option value="2">Vegetables</option>
    <option value="3">Drinks</option>
    <option value="4">Fruits</option>
  </select>
  <button onclick="addProd()">submit</button>

  <a href="index.html">Back to Home Page.</a>
  <script>
    var lsCategories = localStorage.getItem("categories")
    const categories = JSON.parse(lsCategories)
    var lsproducts = localStorage.getItem("products")
    const products = JSON.parse(lsproducts)
    var cart = localStorage.getItem("cart")
    cart = JSON.parse(cart)
    function addProd() {
      let i = 0
      let productID = false
      if (desc.value == '') {
        desc.value == 'no info about this item'
      }
      if (price.value == '' || price.value == NaN) {
        alert('you must include a price, price must be ONLY numbers')
        return;
      }
      if (products.length == 0) {
        products.push({ id: 1, name: _name.value, catId: category.value, description: desc.value, picture: pic.value, price: price.value })
      }
      console.log(category.value);
      while (i < products.length) {

        let temp = i
        if (products[i].id > i + 1) {
          products.push({ id: i, name: _name.value, catId: category.value, description: desc.value, picture: pic.value, price: price.value })
          products.sort(dynamicSort('id'))
          break;
        }
        i++
      }
      if (i == products.length) {
        products.push({ id: i + 1, name: _name.value, catId: category.value, description: desc.value, picture: pic.value, price: price.value })
      }
      console.log(products);
      localStorage.setItem("products", JSON.stringify(products))
      alert('product has been added')
    }
    function dynamicSort(property) {
      return function (a, b) {
        localStorage.setItem('categories', JSON.stringify(categories))
        localStorage.setItem('products', JSON.stringify(products))
        return (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;
      }
    }
  </script>
</body>

</html>